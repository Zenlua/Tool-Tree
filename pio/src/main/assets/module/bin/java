#!/data/data/com.tool.tree/files/home/bin/bash

if [ "$($TERMUX/bin/java -version 2>&1 | grep -cm1 'java.lang.OutOfMemoryError')" == 1 ];then
$TERMUX/bin/java
echo "Java is corrupted and cannot be used!" >&2
exit 1
fi

exec $TERMUX/bin/java \
-Dfile.encoding=UTF-8 \
-Xms100m \
-Xmx$(glog ramoccupied 2048)m \
-Duser.home=$HOME \
-Djava.home=$JAVA_HOME \
-Djava.library.path=$LIB \
-Djava.io.tmpdir=$TMP \
-Duser.language=$LANGUAGE \
-Duser.name=$APP_USER_ID "$@"
