#!/data/data/com.tool.tree/files/home/bin/bash

show_help(){
echo "Use: notiservice -d|--delete false -id|--id 123 -t|--title 'Hello' -m|--message 'Xin chào'"
exit 0
}

if [[ $# -eq 0 || "$1" != -* ]]; then
show_help
fi

DELETE=""; ID=""; TITLE=""; MESSAGE="";
while [ $# -gt 0 ]; do
  case "$1" in
    -d|--delete)
      DELETE="$2"
      shift 2
      ;;
    -id|--id)
      ID="$2"
      shift 2
      ;;
    -t|--title)
      TITLE="$2"
      shift 2
      ;;
    -m|--message)
      MESSAGE="$2"
      shift 2
      ;;
    -a|--am)
      AMON=1
      shift
      ;;
    -h|--help)
      show_help
      ;;
    *)
      echo "Unknown option: $1"
      exit 1
      ;;
  esac
done

# Mặc định
CMDs="startservice -n com.tool.tree/com.tool.tree.NotiService "
[ "$DELETE" == "true" ] && CMDs+="--ez delete true "
[ "$ID" ] && CMDs+="--ei id $ID "
[ "$TITLE" ] && CMDs+="--es title \"$TITLE\" "
[ "$MESSAGE" ] && CMDs+="--es message \"$MESSAGE\" "

if [ "$AMON" == 1 ] || [ -z "$shell_progres" ];then
    eval "am $CMDs" &>/dev/null
else
    echo "am:[$CMDs]"
fi
